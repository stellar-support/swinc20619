<?xml version="1.0"?>
<odoo noupdate="1">
    <record id="ir_cron_delete_oldest_orders" model="ir.cron">
        <field name="name">Sale Order: Delete oldest sale orders</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="state">code</field>
        <field name="code">
date_until = datetime.datetime.now() - datetime.timedelta(weeks=1)
orders = model.search([('state', '=','draft'), ('order_line', '=', False),("create_date","&lt;=", date_until)], limit=5000)
log('orders found %s' % (len(orders)), level='info')
orders.unlink()
        </field>
        <field name="user_id" ref="base.user_root"/>
        <field name="interval_number">1</field>
        <field name="interval_type">weeks</field>
        <field name="numbercall">-1</field>
        <field name="doall" eval="False"/>
        <field name="nextcall">2021-05-30 21:00:00</field>
    </record>
</odoo>
