<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Inherit Form View to Modify it -->
        <record id="account_move_inherit" model="ir.ui.view">
            <field name="name">account.move.form.inherit.</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/group[1]/group[2]/div/field[@name='invoice_payment_term_id']" position="after">
                    <field name="global_comments" string="Global Comments:"/>
                    <field name="comments_invoice" string="Invoice Notes:"/>
                </xpath>
                  <xpath expr="//form/sheet/group[1]/group[2]/div/field[@name='invoice_date_due']" position="after">
                    <field name="delievery_method" attrs="{}" invisible="1"/>
                  </xpath>
                <xpath expr="//field[@name='invoice_user_id']" position="after">
                    <field name="team_id"/>
                </xpath>
                  <xpath expr="//field[@name='team_id']" position="after">
                    <field name="customer_po" string="Customer Po#" attrs="{}"/>
                    <field name="warehouse_note" string="Warehouse Notes"/>
                    <field name="customer_notes" string="Customer Notes:"/>
                    <field name="field_t1owR" string="Customer PO #:" attrs="{}" invisible="1"/>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='product_id']" position="after">
                    <field name="serial_number" attrs="{}" force_save="True" readonly="1"/>
                    <field name="notes_1" string="Notes"/>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='name']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                    <attribute name="invisible">1</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='account_id']" position="attributes">
                    <attribute name="attrs">{"required": [["display_type","=",False]]}</attribute>
                    <attribute name="invisible">1</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='account_id']" position="after">
                    <field name="invoice_count" attrs="{}" invisible="1"/>
                    <field name="qty_Delivered" attrs="{}" invisible="1"/>
                    <field name="qty_ordered_good_1" string="Qty Ordered"/>
<!--                    <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='quantity'][2]" position="move"/>-->
                    <field name="qty_bo"/>
                    <field name="qty_Delivered" attrs="{}" invisible="1"/>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='product_uom_id']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                    <attribute name="invisible">1</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='price_unit']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='discount']" position="after">
                    <field name="unit_price_after" string="Unit Price after discount"/>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/kanban[1]" position="after">
                    <form>
                      <field name="display_type" invisible="1"/>
                      <!--
                                        We need the sequence field to be here for new lines to be added at the correct position.
                                        TODO: at some point we want to fix this in the framework so that an invisible field is not required.
                                    -->
                      <field name="sequence" invisible="1"/>
                      <group attrs="{'invisible': [('display_type', '!=', False)]}" name="studio_group_0c12bd">
                        <group name="studio_group_587df5">
                          <field name="partner_id" invisible="1"/>
                          <field name="move_type" invisible="1"/>
                          <field name="company_id" invisible="1"/>
                          <field name="product_id" context="{'partner_id': partner_id}"/>
                          <field name="quantity" invisible="1"/>
                            <label for="quantity"/>
                          <div name="studio_div_c325be"/>
                        </group>
                      </group>
                    </form>
                  </xpath>


                    <xpath expr="//div[@name='studio_div_c325be']" position="inside">
                        <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='quantity']" position="move"/>
                        <field name="product_uom_category_id" invisible="1"/>
                        <field name="product_uom_id" class="oe_inline" groups="uom.group_uom"/>
                    </xpath>


                  <xpath expr="//group[@name='studio_group_587df5']" position="inside">
                    <field name="price_unit"/>
                    <field name="discount" groups="product.group_discount_per_so_line"/>
                    <field name="currency_id" invisible="1"/>
                  </xpath>
                  <xpath expr="//group[@name='studio_group_0c12bd']" position="inside">
                    <group name="studio_group_218869">
                      <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags" options="{'color_field': 'color'}"/>
                      <field name="purchase_id" invisible="context.get('type') in ('out_invoice', 'out_refund')"/>
                      <field domain="[('company_id', '=', company_id)]" name="account_id" groups="account.group_account_user"/>
                      <field name="tax_ids" context="{'type': move_type}" domain="[('type_tax_use','!=','none'),('company_id', '=', company_id)]" widget="many2many_tags" options="{'no_create': True}"/>
                      <field domain="[('company_id', '=', company_id)]" name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                      <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                      <field name="company_id" groups="base.group_multi_company" readonly="1"/>
                    </group>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/form[1]" position="inside">
                    <label for="name" string="Description" attrs="{'invisible': [('display_type', '!=', False)]}"/>
                    <label for="name" string="Section" attrs="{'invisible': [('display_type', '!=', 'line_section')]}"/>
                    <label for="name" string="Note" attrs="{'invisible': [('display_type', '!=', 'line_note')]}"/>
                    <field name="name"/>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/group[1]/field[@name='amount_total']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                    <attribute name="invisible">1</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/group[1]/field[@name='amount_total']" position="after">
                    <field name="amount_total_signed" string="Total"/>
                  </xpath>
                   <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='sequence']" position="after">
                      <field name="bill_count" string="Bill count" attrs="{}" invisible="1"/>
                      <field name="qty_ordered_original" string="Qty Ordered Original" attrs="{}" invisible="1"/>
                      <field name="purchases_qty_received_accumulate" string="Purchases Qty Received accumulate" attrs="{}" invisible="1"/>
                   </xpath>
                    <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='name']" position="attributes">
                      <attribute name="attrs">{}</attribute>
                      <attribute name="invisible">1</attribute>
                    </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='account_id']" position="attributes">
                      <attribute name="attrs">{}</attribute>
                      <attribute name="invisible">1</attribute>
                  </xpath>
                  <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/tree[1]/field[@name='account_id']" position="after">
                      <field name="qty_ordered" string="Qty Ordered" attrs="{}" invisible="1"/>
                  </xpath>
              <xpath expr="//field[@name='quantity']" position="attributes">
                  <attribute name="string">Qty Received</attribute>
              </xpath>
              <xpath expr="//field[@name='quantity']" position="after">
                  <field name="qty_bo_po" string="Qty BO" attrs="{}" invisible="1"/>
              </xpath>
                 <xpath expr="//page[@name='other_info']/group[1]/group[1]/field[@name='invoice_user_id']" position="before">
                    <field name="invoice_origin"/>
            </xpath>
        </field>
        </record>

      <!-- Inherit Form View to Modify it -->
      <record id="account_tree_studio_inherit" model="ir.ui.view">
          <field name="name">account.move.line.tree.inherit</field>
          <field name="model">account.move.line</field>
          <field name="inherit_id" ref="account.view_move_line_tree"/>
          <field name="arch" type="xml">
            <xpath expr="//tree[1]/field[@name='name']" position="before">
                <field name="create_date"/>
                <field name="move_id"/>
                <field name="product_id"/>
                <field name="partner_id"/>
            </xpath>
            <xpath expr="//tree[1]/field[@name='name']" position="attributes">
                <attribute name="attrs">{}</attribute>
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//tree[1]/field[@name='name']" position="after">
                <field name="serial_number" attrs="{}" invisible="1"/>
            </xpath>
          </field>
      </record>

        <!-- Inherit Form View to Modify it -->
        <record id="inherit_account_move_line_studio" model="ir.ui.view">
            <field name="name">account.move.line.form.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='account_id']" position="attributes">
                <attribute name="attrs">{}</attribute>
                <attribute name="invisible">1</attribute>
            </xpath>
                <xpath expr="//field[@name='account_id']" position="after">
                <field name="qty_ordered" attrs="{}" invisible="1"/>
                <field name="qty_ordered" attrs="{}" invisible="1"/>
            </xpath>
                 <xpath expr="//page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='price_subtotal']" position="after">
<!--                <xpath expr="//field[@name='product_uom_id']" position="move"/>-->
                <xpath expr="//field[@name='price_unit']" position="move"/>
                <field name="unit_price_after" attrs="{}"/>
                <field name="cost" string="cost" attrs="{}"/>
                <xpath expr="//field[@name='discount']" position="move"/>
            </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree[1]" position="inside">
                  <field name="product_uom_category_id" invisible="1"/>
              </xpath>
                <xpath expr="//field[@name='price_unit']" position="attributes">
                  <attribute name="attrs">{}</attribute>
            </xpath>
                <xpath expr="//field[@name='discount']" position="attributes">
                <attribute name="attrs">{}</attribute>
                <attribute name="invisible">1</attribute>
            </xpath>
            </field>
        </record>

        <!-- Inherit Form View to Modify it -->
        <record id="account_move_kanban_inherit" model="ir.ui.view">
            <field name="name">account.move.kanban.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form[1]/sheet[1]/notebook[1]/page[1]/field[@name='invoice_line_ids']/kanban[1]" position="after">
    <form>
      <field name="display_type" invisible="1"/>
      <!--
                        We need the sequence field to be here for new lines to be added at the correct position.
                        TODO: at some point we want to fix this in the framework so that an invisible field is not required.
                    -->
      <field name="sequence" invisible="1"/>
      <group attrs="{'invisible': [('display_type', '!=', False)]}" name="studio_group_0c12bd">
        <group name="studio_group_587df5">
          <field name="partner_id" invisible="1"/>
          <field name="move_type" invisible="1"/>
          <field name="company_id" invisible="1"/>
          <field name="product_id" context="{'partner_id': partner_id}"/>
           <field name="quantity" invisible="1"/>
          <label for="quantity"/>
          <div name="studio_div_c325be"/>
        </group>
      </group>
    </form>
  </xpath>
            </field>
        </record>
    </data>
</odoo>